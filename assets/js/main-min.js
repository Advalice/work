"use strict";function registerMailChimp(e){var t=$("#mc-notification");t.find(".alert").addClass("hidden"),$.ajax({type:e.attr("method"),url:mailchimpAjaxLink,data:e.serialize(),cache:!1,dataType:"json",contentType:"application/json; charset=utf-8",error:function(e){t.addClass("active").find(".alert-warning").removeClass("hidden").find("span").html("Could not connect to server. Please try again later.")},success:function(e){if("success"!=e.result){var i=e.msg;t.addClass("active").find(".alert-warning").removeClass("hidden").find("span").html(i)}else{var i=e.msg.substring(4);t.addClass("active").find(".alert-success").removeClass("hidden").find("span").html(newsletterSuccessMsg)}}})}function registerByEmail(e){$.post("php/newsletter-to-email.php",{email:$("#EMAIL").val()}).done(function(e){$("#mc-notification").fadeIn("normal",function(){$(this).html(e)})})}function contactFormValidate(){var e=$("#contactForm"),t=e.attr("action");return e.validate({submitHandler:function(e){var i=$(this.submitButton);i.button("loading"),$.ajax({type:"POST",url:t,data:{name:$("#contactForm #name").val(),email:$("#contactForm #email").val(),message:$("#contactForm #message").val()},dataType:"json",success:function(e){"success"==e.response?($("#contactSuccess").removeClass("hidden"),$("#contactError").addClass("hidden"),$("#contactForm .form-control").val("").blur().parent().removeClass("has-success").removeClass("has-error").find("label.error").remove(),$("#contactSuccess").position().top-80<$win.scrollTop()&&$("html, body").animate({scrollTop:$("#contactSuccess").offset().top-80},300)):($("#contactError").removeClass("hidden"),$("#contactSuccess").addClass("hidden"),$("#contactError").position().top-80<$win.scrollTop()&&$("html, body").animate({scrollTop:$("#contactError").offset().top-80},300))},complete:function(){i.button("reset")}})},rules:{name:{required:!0},email:{required:!0,email:!0},message:{required:!0}},highlight:function(e){$(e).parent().removeClass("has-success").addClass("has-error")},success:function(e){$(e).parent().removeClass("has-error").addClass("has-success").find("label.error").remove()}}),!1}var $win=$(window);$(function(){$(".slick-slider").slick({prevArrow:'<button type="button" class="slick-prev"><i class="material-icons">keyboard_arrow_left</i></button>',nextArrow:'<button type="button" class="slick-next"><i class="material-icons">keyboard_arrow_right</i></button>',responsive:[{breakpoint:600,settings:{slidesToShow:1,slidesToScroll:1}}]}),$("header, .menu-wrapper-mask").find("nav").on("click","a",function(){var e=$(this).closest("li");if(e.find("ul").get(0))return $("header, .menu-wrapper-mask").find("nav ul ul").not(e.find("ul")).slideUp(),e.find("ul").slideToggle(),!1});var e=$("#mc-form");$("#mc-subscribe").on("click",function(t){t&&t.preventDefault(),"mailchimp"==newsletterType?registerMailChimp(e):registerByEmail(e)}),$("div.lightbox-gallery").each(function(){var e=$(this),t=function(){var t=[];return e.find("a").not(".slick-cloned a").each(function(){var e=$(this).attr("href"),i=$(this).data("size").split("x"),s=$(this).data("title"),a=i[0],n=i[1],o={src:e,w:a,h:n,title:s};t.push(o)}),t},i=t(),s=$(".pswp")[0];e.on("click","a",function(t){t.preventDefault();var a=e.find("a").not(".slick-cloned a").index($(this)),n={index:a,bgOpacity:.7,showHideOpacity:!0};new PhotoSwipe(s,PhotoSwipeUI_Default,i,n).init()})});var t=$(".fixed-sidebar"),i=$("nav"),s=i.find(">ul"),a=$("div.nav-toggle"),n=s.height(),o=$(".menu-wrapper-mask");if(a.on("click",function(){$(".toggle-menu").get(0)?$(".toggle-menu").toggleClass("hidden"):($(this).toggleClass("active"),o.get(0)?o.toggleClass("active").find(s).css("height","auto"):s.hasClass("active")?s.css("height",0).removeClass("active"):s.css("height",n).addClass("active"))}),$("#infinit-scroll").get(0)&&$win.on("scroll",function(){if($(document).height()-$win.height()==$win.scrollTop()){var e=$("#infinit-loading"),t=$("#infinit-scroll"),i=t.find(".card").length;i<9&&(e.addClass("active"),$.ajax({url:"php/get-post.php",dataType:"html",data:{postCount:i},success:function(i){t.append(i),e.removeClass("active")}}))}}),$(".isotope-grid").get(0)){var r=$(".isotope-grid").isotope({itemSelector:".grid-item",layoutMode:"fitRows"});$(".filter-button-group").on("click","a",function(){var e=$(this);$(".filter-button-group").find("a").removeClass("active"),e.addClass("active");var t=e.attr("data-filter");r.isotope({filter:t})})}$win.on("resize",function(){$win.outerWidth()<=991?o.get(0)||(s.css("height",0).removeClass("active"),a.removeClass("active")):s.css("height","auto");var e=$(".fullbg");e.get(0)&&($(".fixed-sidebar",e).get(0)&&$win.outerWidth()>991?$(".fixed-sidebar",e).css("height",$win.height()-1):$(".fixed-sidebar",e).css("height","auto"),$(".reveal-body-bg",e).get(0)&&$(".reveal-body-bg",e).css("margin-top",$win.height()-300))});var c=$(".scroll-fade-mask");$win.on("scroll",function(){o.get(0)&&(o.removeClass("active").find(s).css("height","auto"),a.removeClass("active")),c.get(0)&&($win.scrollTop()>100?c.css("opacity",.5):c.css("opacity",0))}),$win.on("scroll resize",function(){t.fixSidebar()}),$win.resize(),$("#contactForm").get(0)&&contactFormValidate()}),function($){$.fn.fixSidebar=function(){return this.each(function(){var e=$(this);$win.width()>991&&$win.height()>e.height()?(e.css("width",e.width()),e.addClass("fixed"),e.removeClass("fixedbottom")):$win.width()>991&&$win.scrollTop()>e.height()+35-$win.height()?(e.css("width",e.width()),e.addClass("fixedbottom")):(e.removeClass("fixedbottom fixed"),e.css("width","auto"))})}}(jQuery);